<!DOCTYPE html>
    <html lang= "en">
    <head>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
        <!--script src="/node_modules/d3/d3.min.js" charset="utf-8"></script-->
        <!--script src = "d3/d3.min.js" type="text/JavaScript"></script-->
        <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

        <style>
/*
            svg {
                border: 1px solid black;
            }
*/
            button {
                margin-right: 2px;
            }

            body {
                margin-left: 30px;
            }
/*
            text {
                font-family: "monospace";
                font-size: 8px;
            }
            */
        </style>

    </head>
   <body>
    <div>
       <div> <!-- previously in div tag class='col-md-4'--> <h3>MIPS Single Cycle Processor</h3></div>
        </div>
    </body>
    <body>
    <div id="infovizDiv"> <!-- previously in div tag class='col-md-4'-->
        <svg style="width:640px;height:480px;">
            <g>

    <!-- START ### IF ###-->
                <!-- PC RECT -->
                <rect class="ifetchObj" id="1" x="35" y="240" width="25" height="70" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></rect>
                <text class="ifetch" id="2" x="38" y="280" stroke="lightgrey" fill="lightgrey" font-size="12px"  >PC</text>

                <!-- LINE PC TO INSTRUCTION MEMORY -->
                <line class="ifetch" id="3" x1="60" y1="275" x2="71" y2="275" stroke="lightgrey" stroke-width="2px"></line>
                <!-- Arrow point end of line-->
                <path class="ifetch" d="M 71,275 71,273 75,275 71,277 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                <!-- CIRCLE -->
                <circle class="ifetchObj" id="4" cx="66" cy="275"  r="2" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></circle>

                <!-- LINE PC TO ADD 4 -->
                <path class="ifetchObj" id="5" d="M 105,55 66,55 66,275" style="fill:none;stroke:lightgrey;stroke-width:2px;"></path>
                <!-- arrow old method-->
                <!--line class="ifetch" id="6" x1="103" y1="55" x2="103" y2="55" marker-end="url(#triangle)" stroke="lightgrey" stroke-width="2px">M</line-->
                <!-- Arrow point end of line-->
                <path class="ifetch" d="M 105,55 105,53 109,55 105,57 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                <g>
                <!-- 4 TO ADD -->
                <line class="ifetch" id="7" x1="90" y1="120" x2="105" y2="120" style="stroke:lightgrey;stroke-width:2px;"></line>
                    <!-- Arrow point end of line-->
                    <path class="ifetch" d="M 105,120 105,118 109,120 105,122 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                <text class="ifetch" id="10" x="80" y="123" stroke="lightgrey" fill="lightgrey" font-size="11px"  >4</text>
                </g>

                <!-- INSTRUCTION MEMORY RECT-->
                <rect class="ifetchObj" id="10" x="80" y="260" width="65" height="90" style="fill:none;stroke:lightgrey;stroke-width:2px;"></rect>
                <text class="ifetch" id="11" x="84" y="272" fill="lightgrey" font-size="9px" >Read</text>
                <text class="ifetch" id="12" x="84" y="284" fill="lightgrey" font-size="9px" >address</text>
                <text class="ifetch" id="13" x="90" y="304" fill="lightgrey" font-size="9px" >Instruction</text>
                <text class="ifetch" id="14" x="114" y="316" fill="lightgrey" font-size="9px" >[31-0]</text>
                <text class="ifetch" id="15" x="88" y="336" fill="lightgrey" font-size="9px" >Instruction</text>
                <text class="ifetch" id="16" x="92" y="346" fill="lightgrey"  font-size="9px" >memory</text>

                <!-- ADD ALU-->
                <g transform="translate(110,40)">
                    <path class="ifetch" id="17" d="M -17.27 20.05 L 20.82 20.05" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" transform="rotate(90,1.77,20.05)" pointer-events="none"></path>
                    <path class="ifetch" id="18" d="M -17.27 81.95 L 20.82 81.95" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" transform="rotate(90,1.77,81.95)" pointer-events="none"></path>
                    <path class="ifetch" id="19" d="M 6.85 49.81 L 61.61 49.81" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" transform="rotate(90,34.23,49.81)" pointer-events="none"></path>
                    <path class="ifetch" id="20" d="M 2 1.33 L 34.5 22.17" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" pointer-events="none"></path>
                    <path class="ifetch" id="21" d="M 2 101.33 L 34.5 77.17" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" pointer-events="none"></path>
                    <path class="ifetch" id="22" d="M 2 63 L 5.64 51" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" pointer-events="none"></path>
                    <path class="ifetch" id="23" d="M 5.64 51 L 2 38.83" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" pointer-events="none"></path>
                </g>
                    <text class="ifetch" id="25" x="120" y="95" stroke="lightgrey" fill="lightgrey" font-size="11px" >Add</text>
    <!-- END ### IF ###-->


    <!-- START ### ID ###-->
                <g id="instLines">
                <!-- FIRST INSTRUCTION DISTRIBUTION LINE-->
                <text class="idecode" x="158" y="185" font-size="9px" fill="lightgrey"  >Instruction [31-26]</text>
                <line class="idecodeObj" x1="158" y1=190 x2="226" y2="190" stroke="lightgrey" stroke-width="2px" ></line>
                    <!-- Arrow point end of line-->
                    <path class="idecode"  d="M 226,190 226,188 230,190 226,192 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                    <!-- SECOND INSTRUCTION DISTRIBUTION LINE-->
                <text class="idecode" x="162" y="255" font-size="9px" fill="lightgrey" >Instruction [25-21]</text>
                <line class="idecode" x1="158" y1=260 x2="259" y2="260" stroke="lightgrey" stroke-width="2px"></line>
                    <!-- Arrow point end of line-->
                    <path class="idecode" d="M 259,260 259,258 263,260 259,262 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                    <circle class="idecodeObj" cx="158" cy="260"  r="2" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;" ></circle>
                <!-- THIRD INSTRUCTION DISTRIBUTION LINE-->
                <text class="idecode" x="162" y="287" font-size="9px" fill="lightgrey" >Instruction [20-16]</text>
                <line class="idecode" x1="158" y1=292 x2="259" y2="292" stroke="lightgrey" stroke-width="2px"></line>
                    <!-- Arrow point end of line-->
                    <path class="idecode" d="M 259,292 259,290 263,292 259,294 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                    <circle class="idecodeObj" cx="158" cy="292"  r="2" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></circle>
                <!-- THIRD INSTRUCTION DISTRIBUTION LINE BRANCHES TO MUX  -->
                <path class="idecodeObj" d="M  233,310 213,310 213,292" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></path>
                <line class="idecode" x1="228" y1=310 x2="228" y2="310" stroke="lightgrey" stroke-width="2px" ></line>
                    <!-- Arrow point end of line-->
                    <path class="idecode" d="M 228,310 228,308 232,310 228,312 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                    <circle class="idecodeObj" cx="213" cy="292"  r="2" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;" ></circle>
                <!-- FOURTH INSTRUCTION DISTRIBUTION LINE-->
                <text class="idecode" x="162" y="340" font-size="9px" fill="lightgrey" >Instruction [15-11]</text>
                <line class="idecode" x1="158" y1=345 x2="228" y2="345" stroke="lightgrey" stroke-width="2px" ></line>
                    <!-- Arrow point end of line-->
                    <path class="idecode" d="M 228,345 228,343 232,345 228,347 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                    <circle class="idecodeObj" cx="158" cy="345"  r="2" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;" ></circle>
                <!-- INST MEM RECT TO  DIST LINE-->
                    <line class="idecode" x1="145" y1=300 x2="158" y2="300"  stroke="lightgrey" stroke-width="2px" ></line>
                    <circle class="idecodeObj" cx="158" cy=300  r="2" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;" ></circle>

                    <!-- VERTICAL INSTRUCTION DISTRIBUTION LINE-->
                <line class="idecode" x1="158" y1=412 x2="158" y2="190" style="stroke:lightgrey;stroke-width:2px;" ></line>
                <!-- FIFTH INSTRUCTION DISTRIBUTION LINE-->
                <text class="idecode" x="162" y="407" font-size="9px" fill="lightgrey" >Instruction [15-0]</text>
                <line class="idecode" x1="158" y1=412 x2="285" y2="412" stroke="lightgrey" stroke-width="2px" ></line>
                    <!-- Arrow point end of line-->
                    <path class="idecode" d="M 285,412 285,410 289,412 285,414 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                <!-- 16 DIAG LINE 32 DIAG LINE AT SIGN EXTEND-->
                <text class="idecode" x="273" y="402" font-size="11px" fill="lightgrey" >16</text>
                <line class="idecode" x1="273" y1=405 x2="283" y2="418" style="stroke:lightgrey;stroke-width:2px;" ></line>
                <text class="idecode" x="343" y="402" font-size="11px" fill="lightgrey" >32</text>
                <line class="idecode" x1="343" y1=405 x2="353" y2="418" style="stroke:lightgrey;stroke-width:2px;" ></line>

                <!-- SIXTH INSTRUCTION DISTRIBUTION LINE TO ALU CONTROL-->
                <circle class="idecode" cx="268" cy="412"  r="2" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;" ></circle>
                <path class="idecodeObj" d="M 386,420 372,420 372,465 268,465 268,412" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></path>
                <line class="idecode" x1="380" y1=420 x2="380" y2="420" stroke="lightgrey" stroke-width="2px" ></line>
                    <!-- Arrow point end of line-->
                    <path class="idecode" d="M 380,420 380,418 384,420 380,422 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>


                    <text class="idecode" x="275" y="460" font-size="9px" fill="lightgrey" >Instruction [5-0]</text>
                </g>

                <!-- REGISTER MUX -->
                <g transform="translate(235,300)"><path class="idecodeObj" d="M 2.92 17 L 23.08 17 C 31.87 17 39 21.92 39 28 C 39 34.08 31.87 39 23.08 39 L 2.92 39 C -5.87 39 -13 34.08 -13 28 C -13 21.92 -5.87 17 2.92 17 Z" fill="#ffffff" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" transform="rotate(90,13,28)" pointer-events="none"></path>
                    <path class="idecodeObj" d="M 2 28 L 2 28" fill="none" stroke="lightgrey" stroke-miterlimit="10" pointer-events="none"></path>
                </g>
                <text class="idecode" x="245" y="313" font-size="10px" fill="lightgrey" >0</text>
                <text class="idecode" x="243" y="325" font-size="10px" fill="lightgrey" >M</text>
                <text class="idecode" x="244" y="333" font-size="10px" fill="lightgrey" >u</text>
                <text class="idecode" x="244" y="341" font-size="10px" fill="lightgrey" >x</text>
                <text class="idecode" x="245" y="351" font-size="10px" fill="lightgrey" >1</text>
                <path class="idecodeObj" d="M 273,144 295,144 295,125 150,125 150,368 248,368 248,355" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></path>

                <!-- LINE REGISTER MUX TO REGISTER FILE -->
                <line class="idecode" x1="260" y1=327 x2="264" y2="327" stroke="lightgrey" stroke-width="2px"></line>
                    <!-- Arrow point end of line-->
                    <path class="idecode" d="M 264,327 264,325 268,327 264,329 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                <!-- CONTROL ELLIPSE -->
                <ellipse class="idecodeObj, idtorq" cx="260" cy="190" rx="55" ry="25" style="fill:none;stroke:lightgrey;stroke-width:2px;" transform="rotate(90,260,190)" ></ellipse>
                <text class="idtorq" x="240" y="195" font-size="11px" stroke="none" fill="lightgrey" >Control</text>
                <text class="idtorq" x="300" y="140" font-size="9px" stroke="none" fill="lightgrey" >RegDst</text>
                <text class="idtorq" x="290" y="160" font-size="9px" stroke="none" fill="lightgrey" >Brach</text>
                <!-- CONTROL ELLIPSE TO OR GATE -->
                <path class="idecodeObj, idtorq" d="M 482,153 455,153 455,165 283,165" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></path>
                <!-- CONTROL ELLIPSE TO DATA MEMORY -->
                <text class="idecode, idtorq" x="290" y="177" font-size="9px" fill="lightgrey" >MemRead</text>
                <path class="idecodeObj, idtorq" d="M 540,400 540,430 625,430 625,180 283,180" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></path>
                <!-- CONTROL ELLIPSE TO DATA MEMORY MUX -->
                <text class="idecode, idtorq" x="290" y="192" font-size="9px" fill="lightgrey" >MemtoReg</text>
                <path class="idecodeObj, idtorq" d="M 593,311 593,195 283,195" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></path>
                <!-- CONTROL ELLIPSE TO ALUOP -->
                <text class="idecode, idtorq" x="290" y="205" font-size="9px" fill="lightgrey" >ALUOp</text>
                <path class="idecodeObj, idtorq" d="M 411,444 411,472 367,472 367,207 283,207" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></path>
                <!-- CONTROL ELLIPSE TO MEMWRITE -->
                <text class="idecode, idtorq" x="290" y="217" font-size="9px" fill="lightgrey" >MemWrite</text>
                <path class="idecodeObj, idtorq" d="M 535,290 535,220 280,220" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></path>
                <!-- CONTROL ELLIPSE TO ALUSRC -->
                <text class="idecode, idtorq" x="290" y="231" font-size="9px" fill="lightgrey" >ALUSrc</text>
                <path class="idecodeObj, idtorq" d="M 398,320 398,234 274,234" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></path>
                <!-- CONTROL ELLIPSE TO REGWRITE -->
                <text class="idecode, idtorq" x="310" y="245" font-size="9px" fill="lightgrey" >RegWrite</text>
                <path class="idecodeObj, idtorq" d="M 305,250 305,245 263,245" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></path>

                <!-- REGISTER FILE RECT-->
                <rect class="idecodeObj" x="270" y="250" width="85" height="120" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></rect>
                <text class="idecode" x="276" y="265" font-size="10px" fill="lightgrey" >Read</text>
                <text class="idecode" x="276" y="276" font-size="10px" fill="lightgrey" >register 1</text>

                    <text class="idecode" x="322" y="286" font-size="10px" fill="lightgrey" >Read</text>
                    <text class="idecode" x="322" y="296" font-size="10px" fill="lightgrey" >data 1</text>

                <text class="idecode" x="276" y="296" font-size="10px" fill="lightgrey" >Read</text>
                <text class="idecode" x="276" y="306" font-size="10px" fill="lightgrey" >register 2</text>

                    <text class="idecode" x="322" y="324" font-size="10px" fill="lightgrey" >Read</text>
                    <text class="idecode" x="322" y="334" font-size="10px" fill="lightgrey" >data 2</text>

                <text class="idecode" x="276" y="326" font-size="10px" fill="lightgrey" >Write</text>
                <text class="idecode" x="276" y="336" font-size="10px" fill="lightgrey" >register</text>
                <text class="idecode" x="276" y="354" font-size="10px" fill="lightgrey" >Write</text>
                <text class="idecode" x="276" y="364" font-size="10px" fill="lightgrey" >data</text>

                    <text class="idecode" x="306" y="366" font-size="11px" fill="lightgrey" >Registers</text>

                <!-- LINE READ DATA 1 TO ALU RESULT -->
                <line class="idecode" x1="355" y1=285 x2="413" y2="285" stroke="lightgrey" stroke-width="2px" ></line>
                    <!-- Arrow point end of line-->
                    <path class="idecode" d="M 413,285 413,283 417,285 413,287 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                <!-- LINE READ DATA 2 TO MUX ALU RESULT -->
                <line class="idecode" x1="355" y1=325 x2="377" y2="325" stroke="lightgrey" stroke-width="2px" ></line>
                    <!-- Arrow point end of line-->
                    <path class="idecode" d="M 377,325 377,323 381,325 377,327 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                <!-- SIGN-EXTED ELLIPSE-->
                <text class="idecode, idtorq" x="299" y="407" font-size="11px" fill="lightgrey" >Sign-</text>
                <text class="idecode, idtorq" x="299" y="420" font-size="11px" fill="lightgrey" >extend</text>
                <ellipse class="idecodeObj, idtorq" cx="315" cy="410" rx="30" ry="20" style="fill:none;stroke:lightgrey;stroke-width:2px;" transform="rotate(90,315,410)" ></ellipse>s

                <!-- REGISTER FILE READ DATA2 TO MEMORY WRITE DATA JUNCTION-->
                <circle class="idecodeObj" cx="362" cy=325  r="2" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;" ></circle>

                <!-- LINE SIGN-EXTED ELLIPSE TO SHIFT LEFT 2-->
                <path class="idecodeObj" d="M 375,140 372,140 372,412 335,412" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></path>
                <line class="idecode" x1="372" y1=140 x2="373" y2="140"  stroke="lightgrey" stroke-width="2px" ></line>
                    <!-- Arrow point end of line-->
                    <path class="idecode" d="M 373,140 373,138 377,140 373,142 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                <!-- LINE SIGN-EXTED 32 TO SHIFT LEFT 2 ALU MUX JUNCTION-->
                <circle class="idecodeObj" cx="372" cy="350"  r="2" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;" ></circle>
                <line class="idecode" x1="372" y1=350 x2="377" y2="350" stroke="lightgrey" stroke-width="2px" ></line>
                    <!-- Arrow point end of line-->
                    <path class="idecode" d="M 377,350 377,348 381,350 377,352 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                <!-- LINE ADD ALU TO ALU RESULT -->
                <path class="idecodeObj" d="M 145,90, 345,90 345,57 505,57" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></path>
                <!-- arrow -->
                <line class="idecode" x1="505" y1="57" x2="505" y2="57" stroke="lightgrey" stroke-width="2px" ></line>
                <!-- Arrow point end of line-->
                <path class="idecode" d="M 505,57 505,55 509,57 505,59 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                <!-- CIRCLE -->
                <circle class="idecodeObj" cx="345" cy="78"  r="2" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;" ></circle>
                <!-- arrow -->
                <line class="idecode" x1="345" y1="78" x2="417" y2="78" stroke="lightgrey" stroke-width="2px" ></line>
                <!-- Arrow point end of line-->
                <path class="idecodeObj" d="M 417,78 417,76 421,78 417,80 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>
    <!-- END ### ID ###-->


    <!-- START ### EX ###-->
                <!-- ALU CONTROL ELLIPSE-->
                <ellipse class="excodeObj, extorq" cx="410" cy="415" rx="30" ry="20" style="fill:none;stroke:lightgrey;stroke-width:2px;" transform="rotate(90,410,415)" ></ellipse>
                <text class="excode, extorq" x="398" y="410" font-size="11px" fill="lightgrey" >ALU</text>
                <text class="excode, extorq" x="392" y="422" font-size="11px" fill="lightgrey" >control</text>
                <path class="excodeObj, extorq" d="M 445,350 445,415 431,415" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></path>

                <!-- ALU MUX -->
                <g transform="translate(384,310)"><path class="excodeObj" d="M 2.92 17 L 23.08 17 C 31.87 17 39 21.92 39 28 C 39 34.08 31.87 39 23.08 39 L 2.92 39 C -5.87 39 -13 34.08 -13 28 C -13 21.92 -5.87 17 2.92 17 Z" fill="#ffffff" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" transform="rotate(90,13,28)" pointer-events="none"></path>
                    <path d="M 2 28 L 2 28" fill="none" stroke="lightgrey" stroke-miterlimit="10" pointer-events="none" ></path>
                </g>
                <line class="excodeObj" x1="408" y1=340 x2="413" y2="340" stroke="lightgrey" stroke-width="2px" ></line>
                    <!-- Arrow point end of line-->
                    <path class="excodeObj" d="M 413,340 413,338 417,340 413,342 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                <text class="excode" x="394" y="322" font-size="10px" fill="lightgrey" >0</text>
                <text class="excode" x="392" y="332" font-size="10px" fill="lightgrey" >M</text>
                <text class="excode" x="393" y="340" font-size="10px" fill="lightgrey" >u</text>
                <text class="excode" x="393" y="348" font-size="10px" fill="lightgrey" >x</text>
                <text class="excode" x="394" y="358" font-size="10px" fill="lightgrey" >1</text>

                <!-- ALU CTRL JUMP-->
                <g transform="translate(420,260)"><path class="excodeObj" d="M -16.82 20.05 L 21.27 20.05" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" transform="rotate(90,2.23,20.05)" pointer-events="none" ></path>
                    <path class="excodeObj" d="M -16.82 81.95 L 21.27 81.95" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" transform="rotate(90,2.23,81.95)" pointer-events="none" ></path>
                    <path class="excodeObj" d="M 26.39 49.81 L 81.15 49.81" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" transform="rotate(90,53.77,49.81)" pointer-events="none" ></path>
                    <path class="excodeObj" d="M 2 1.33 L 53.67 22.17" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" pointer-events="none" ></path>
                    <path class="excodeObj" d="M 2 101.33 L 53.67 77.17" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" pointer-events="none" ></path>
                    <path class="excodeObj" d="M 2 63 L 8.36 51" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" pointer-events="none" ></path>
                    <path class="excodeObj" d="M 8.36 51 L 2 38.83" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" pointer-events="none" ></path>
                </g>
                <text class="excode" x="450" y="290" font-size="10px" fill="lightgrey" >Zero</text>
                <text class="excode" x="430" y="314" font-size="10px" fill="lightgrey" >ALU</text>
                <text class="excode" x="450" y="323" font-size="10px" fill="lightgrey" >ALU</text>
                <text class="excode" x="445" y="333" font-size="10px" fill="lightgrey" >result</text>
                <line class="excode" x1="475" y1=320 x2="491" y2="320"  stroke="lightgrey" stroke-width="2px" ></line>
                    <!-- Arrow point end of line-->
                    <path class="excode" d="M 491,320 491,318 495,320, 491,322 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                <!-- ALU ZERO TO OR -->
                <path class="excodeObj, extorq" d="M 481,169 477,169 480,290 475,290" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></path>

                <g transform="translate(5,10)">
                    <!-- SHIFT LEFT 2 ELLIPSE-->
                    <ellipse class="excodeObj" cx="390" cy="130" rx="20" ry="15" style="fill:none;stroke:lightgrey;stroke-width:2px;" transform="rotate(90,390,130)" ></ellipse>
                    <text class="excode" x="378" y="128" font-size="11px" fill="lightgrey" >Shift</text>
                    <text class="excode" x="378" y="138" font-size="11px" fill="lightgrey" >left 2</text>
                </g>
                <line class="excode" x1="410" y1="138" x2="418" y2="138" stroke="lightgrey" stroke-width="2px" ></line>
                <!-- Arrow point end of line-->
                <path class="excodeObj" d="M 418,138 418,136 422,138 418,140 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                <!-- ALU SHIFT left 2 to PC-->
                <g transform="translate(425,60)"><path class="excodeObj" d="M -16.82 20.05 L 21.27 20.05" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" transform="rotate(90,2.23,20.05)" pointer-events="none" ></path>
                    <path class="excodeObj" d="M -16.82 81.95 L 21.27 81.95" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" transform="rotate(90,2.23,81.95)" pointer-events="none" ></path>
                    <path class="excodeObj" d="M 26.39 49.81 L 81.15 49.81" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" transform="rotate(90,53.77,49.81)" pointer-events="none" ></path>
                    <path class="excodeObj" d="M 2 1.33 L 53.67 22.17" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" pointer-events="none" ></path>
                    <path class="excodeObj" d="M 2 101.33 L 53.67 77.17" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" pointer-events="none" ></path>
                    <path class="excodeObj" d="M 2 63 L 8.36 51" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" pointer-events="none" ></path>
                    <path class="excodeObj" d="M 8.36 51 L 2 38.83" fill="none" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" pointer-events="none" ></path>
                </g>
                <text class="excode" x="435" y="115" font-size="11px" fill="lightgrey" >Add</text>
                <text class="excode" x="450" y="94" font-size="11px" fill="lightgrey" >ALU</text>
                <text class="excode" x="450" y="104" font-size="11px" fill="lightgrey" >result</text>

                <!-- LINE READ DATA 2 TO WRITE DATA -->
                <path class="excodeObj" d="M 495,375 362,375 362,325" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></path>
                <line class="excode" x1="493" y1=375 x2="493" y2="375" stroke="lightgrey" stroke-width="2px" ></line>
                <!-- Arrow point end of line-->
                <path class="excodeObj" d="M 493,375 493,373 497,375 493,377  z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                <!-- LINE ALU RESULT TO MUX -->
                <line class="excode" x1="480" y1="110" x2="505" y2="110"  stroke="lightgrey" stroke-width="2px" ></line>
                <!-- Arrow point end of line-->
                <path class="excodeObj" d="M 505,110 505,108 509,110 505,112 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>
    <!-- END ### EX ###-->


    <!-- START ### MEM ###-->
                <!-- DATA MEMORY-->
                <rect class="memcodeObj" x="500" y="290" width="65" height="110" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></rect>
                <text class="memcode" x="503" y="325" font-size="10px" fill="lightgrey" >Address</text>
                <text class="memcode" x="540" y="318" font-size="10px" fill="lightgrey" >Read</text>
                <text class="memcode" x="542" y="328" font-size="10px" fill="lightgrey" >data</text>
                <text class="memcode" x="503" y="370" font-size="10px" fill="lightgrey" >Write</text>
                <text class="memcode" x="503" y="380" font-size="10px" fill="lightgrey" >data</text>
                <text class="memcode" x="538" y="385" font-size="11px" fill="lightgrey" >Data</text>
                <text class="memcode" x="522" y="395" font-size="11px" fill="lightgrey" >memory</text>

                <!-- LINE BETWEEN DATA MEMORY AND WB MUX-->
                <line class="memcode" x1="566" y1=324 x2="575" y2="324" stroke="lightgrey" stroke-width="2px" ></line>
                    <!-- Arrow point end of line-->
                    <path class="memcodeObj" d="M 575,324 575,322 579,324 575,326 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                <!-- JUNCTION BETWEEN DATA MEMORY AND WB MUX-->
                <circle class="memcodeObj" cx="484" cy="320"  r="2" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;" ></circle>
                <path class="memcodeObj" d="M 575,350 572,350 572,410 484,410 484,320" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></path>
                <line class="memcode" x1="575" y1=350 x2="575" y2="350" stroke="lightgrey" stroke-width="2px" ></line>
                    <!-- Arrow point end of line-->
                    <path class="memcodeObj" d="M 575,350 575,348 579,350 575,352 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>

                <!-- ALU RESULT MUX -->
                <g transform="translate(510,50)"><path class="memcodeObj" d="M 1.51 23 L 27.49 23 C 38.82 23 48 28.6 48 35.5 C 48 42.4 38.82 48 27.49 48 L 1.51 48 C -9.82 48 -19 42.4 -19 35.5 C -19 28.6 -9.82 23 1.51 23 Z" fill="#ffffff" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" transform="rotate(90,14.5,35.5)" pointer-events="none" ></path>
                </g>
                <text class="memcode" x="522" y="65" font-size="12px" fill="lightgrey" >0</text>
                <text class="memcode" x="520" y="80" font-size="12px" fill="lightgrey" >M</text>
                <text class="memcode" x="521" y="90" font-size="12px" fill="lightgrey" >u</text>
                <text class="memcode" x="521" y="100" font-size="12px" fill="lightgrey" >x</text>
                <text class="memcode" x="522" y="114" font-size="12px" fill="lightgrey" >1</text>

                <!-- OR -->
                <g transform="translate(480,15)"><path class="memcodeObj, memtorq" d="M 1 133.5 C 1 132.84 1.11 132.2 1.3 131.73 C 1.49 131.26 1.75 131 2.02 131 L 17.08 131 C 19.47 133.69 21 139.55 21 146 C 21 152.45 19.47 158.31 17.08 161 L 2.02 161 C 1.75 161 1.49 160.74 1.3 160.27 C 1.11 159.8 1 159.16 1 158.5 L 1 133.5 Z" fill="#ffffff" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" pointer-events="none"></path>
                </g>
                <path class="memcodeObj, memtorq" d="M  525,119 525,160 501,160" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></path>
                <!-- arrow -->
                <!--line class="memcode, memtorq" x1="525" y1="130" x2="525" y2="127" stroke="red" stroke-width="2px"></line-->
                <!-- Arrow point end of line-->
                <!--path class="memcodeObj"  d="M 525,127 523,127 525,123 527,127 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path-->

                <!-- LINE ALU RESULT MUX TO PC -->
                <path class="memcodeObj"  d="M 25,275 22,275 22,23 545,23 545,84 536,84" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></path>
                <!-- arrow -->
                <line class="memcode"  x1="23" y1="275" x2="26" y2="275" stroke-width="2px"></line>
                <!-- Arrow point end of line-->
                <path class="memcodeObj" d="M 26,275 26,273 30,275 26,277 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>
    <!-- END ### MEM ###-->


    <!-- START ### WB ###-->
                <!-- MEMORY MUX -->
                <g transform="translate(580,310)"><path class="wbcodeObj" d="M 2.92 17 L 23.08 17 C 31.87 17 39 21.92 39 28 C 39 34.08 31.87 39 23.08 39 L 2.92 39 C -5.87 39 -13 34.08 -13 28 C -13 21.92 -5.87 17 2.92 17 Z" fill="#ffffff" stroke="lightgrey" stroke-width="2" stroke-miterlimit="10" transform="rotate(90,13,28)" pointer-events="none" ></path>
                    <path class="wbcodeObj" d="M 2 28 L 2 28" fill="none" stroke="lightgrey" stroke-miterlimit="10" pointer-events="none" ></path>
                </g>
                <text class="wbcode" x="590" y="325" font-size="10px" fill="lightgrey" >1</text>
                <text class="wbcode" x="588" y="335" font-size="10px" fill="lightgrey" >M</text>
                <text class="wbcode" x="589" y="343" font-size="10px" fill="lightgrey" >u</text>
                <text class="wbcode" x="589" y="351" font-size="10px" fill="lightgrey" >x</text>
                <text class="wbcode" x="590" y="361" font-size="10px" fill="lightgrey" >0</text>

                <!-- LINE MEMORY MUX TO REGISTER WRITE DATA  -->
                <path class="wbcodeObj" d="M 265,360 256,360 256,476 614,476 614,340 603,340" style="fill:none;stroke:lightgrey;stroke-width:2px;" ></path>
                <line class="wbcode" x1="262" y1=360 x2="262" y2="360"  stroke="lightgrey" stroke-width="2px" ></line>
                    <!-- Arrow point end of line-->
                    <path class="wbcodeObj" d="M 262,360 262,358 266,360 262,362 z" style="fill:lightgrey;stroke:lightgrey;stroke-width:2px;"></path>
    <!-- END ### WB ###-->
            </g>
        </svg>
        <br/>
        <br/>
    </div>
    </body>
</html>
    <script>
            var iftoggle = 0;
            var idtoggle = 0;
            var extoggle = 0;
            var memtoggle = 0;
            var wbtoggle = 0;
            var done;
            var dataKeys = ["PLAY", "IF", "ID", "EX", "MEM", "WB", "RESTART"];

            // make the buttons
            d3.select("body").append("div")
                    .style("text-align", "center")
                    .attr("id", "forButton");

                d3.select("#forButton").selectAll("button.teams").data(dataKeys).enter()
                        .append("button")
                        .attr("class", "btn btn-primary btn-xs")
                        .attr()
                        .on("click", buttonClick)
                        .html(function (d) {
                            return d
                        });                      // uses data from dataKeys to name the buttons

            //
            function setBlack (someClass){
                done =  (d3.selectAll(someClass)
                        .transition()
                        .style('opacity', 1)
                        .duration(1500)
                        .style("fill", "black")
                        .style("stroke", "black")
                +
                d3.selectAll(someClass + "Obj")
                        .transition()
                        .style('opacity', 1)
                        .duration(1500)
                        .style("stroke", "black"));
                console.log(done);
                return done
            }

            function setGrey (someClass){
                done =  (d3.selectAll(someClass)
                        .transition()
                        .style('opacity', 1)
                        .duration(1500)
                        .style("fill", "lightgrey")
                        .style("stroke", "lightgrey")
                +
                d3.selectAll(someClass + "Obj")
                        .transition()
                        .style('opacity', 1)
                        .duration(1500)
                        .style("stroke", "lightgrey"));
                return done
            }


            function setTorq (someClass){
                done = d3.selectAll(someClass)
                        .style("stroke", "lightgrey")
                        .transition()
                        .style('opacity', 1)
                        .duration(1500)
                        .style("stroke", "turquoise")
                        .style("fill", "none");
                return done
            }

            function setTorqGrey (someClass){
                done = d3.selectAll(someClass)
                        .transition()
                        .style('opacity', 1)
                        .duration(1500)
                        .style("stroke", "lightgrey")
                        .style("fill", "none");
                return done
            }

            // Toggle each section between color view and light grey view each time a button is clicked
            // or view all as light grey when "RESET" is clicked.  "PLAY" advances each section then resets to grey.
            function buttonClick(datapoint) {       // this function needs to draw each section
                if(datapoint == "IF" && iftoggle == 0) {
                    iftoggle = iftoggle + 1;
                    return setBlack(".ifetch")
                }
                if(datapoint == "IF" && iftoggle == 1){
                    iftoggle = iftoggle - 1;
                    return setGrey(".ifetch")
                }

                if (datapoint == "ID" && idtoggle == 0) {
                    idtoggle = idtoggle + 1;
                    return (setBlack(".idecode") + setTorq(".idtorq"));
                }
                if(datapoint == "ID" && idtoggle == 1){
                    idtoggle = idtoggle - 1;
                    return (setGrey(".idecode") + setTorqGrey(".idtorq"));
                }

                if (datapoint == "EX" && extoggle == 0) {
                    extoggle = extoggle + 1;
                    return (setBlack(".excode") + setTorq(".extorq"));
                }
                if(datapoint == "EX" && extoggle == 1){

                    extoggle = extoggle - 1;
                    return (setGrey(".excode") + setTorqGrey(".extorq"));
                }

                if (datapoint == "MEM" && memtoggle == 0) {
                    memtoggle = memtoggle + 1;
                    return (setBlack(".memcode") + setTorq(".memtorq"));
                }
                if(datapoint == "MEM" && memtoggle == 1){
                    memtoggle = memtoggle - 1;
                    return (setGrey(".memcode") + setTorqGrey(".memtorq"));
                }

                if (datapoint == "WB" && wbtoggle == 0) {
                    wbtoggle = wbtoggle + 1;
                    return (setBlack(".wbcode") + setTorq(".wbtorq"));
                }
                if(datapoint == "WB" && wbtoggle == 1){
                    wbtoggle = wbtoggle - 1;
                    return (setGrey(".wbcode") + setTorqGrey(".wbtorq"));
                }

                if(datapoint == "RESTART"){
                    done =  (d3.selectAll(".ifetch,.idecode, .excode, .wbcode, .memcode")
                            .transition()
                            .style('opacity', 1)
                            .duration(1500)
                            .style("fill", "lightgrey")
                            .style("stroke", "lightgrey")
                    +
                    d3.selectAll(".ifetchObj, .idecodeObj, .excodeObj, .wbcodeObj, .memcodeObj")
                            .transition()
                            .style('opacity', 1)
                            .duration(1500)
                            .style("stroke", "lightgrey")
                    +
                    d3.selectAll(".idtorq, .wbtorq, .extorq, .memtorq")
                            .transition()
                            .style('opacity', 1)
                            .duration(1500)
                            .style("stroke", "lightgrey")

                    );
                    iftoggle = 0;
                    idtoggle = 0;
                    extoggle = 0;
                    memtoggle = 0;
                    wbtoggle = 0;
                    return done;
                }
                if(datapoint == "PLAY"){
                    var blackSection = [".ifetch",".idecode", ".excode", ".memcode", ".wbcode"];
                    var turqSection = ["iftorq", ".idtorq", ".extorq", ".memtorq", ".wbtorq"];
                    var i = 0;

                        function myLoop () {
                            setTimeout(function () {
                                setBlack(blackSection[i]);
                                setTorq(turqSection[i]);
                                 //  your code here
                                i++;
                                if (i < 5) {
                                    myLoop();
                                }
                            }, 1500)
                        }
                    myLoop();
                    iftoggle = 1;
                    idtoggle = 1;
                    extoggle = 1;
                    memtoggle = 1;
                    wbtoggle = 1;
                    return done;
                }
            }
    </script>